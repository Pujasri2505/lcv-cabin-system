<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Electrical Test Parameters</title>

<style>
body {
  background: linear-gradient(135deg, #0f172a, #1e293b);
  font-family: "Segoe UI", sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.panel {
  background: #fff;
  width: 520px;
  padding: 30px;
  border-radius: 18px;
  box-shadow: 0 25px 45px rgba(0,0,0,0.35);
}

h2 {
  text-align: center;
  color: #002b5c;
  margin-bottom: 8px;
}

.info {
  text-align: center;
  font-size: 14px;
  color: #555;
  margin-bottom: 20px;
}

.param {
  display: flex;
  justify-content: space-between;
  padding: 10px 14px;
  margin-bottom: 8px;
  background: #f1f5f9;
  border-radius: 8px;
  font-size: 14px;
}

.ok { color: green; font-weight: 700; }
.notok { color: red; font-weight: 700; }

button {
  width: 100%;
  padding: 12px;
  margin-top: 14px;
  border: none;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
}

.start { background: #16a34a; color: #fff; }
.back  { background: #002b5c; color: #fff; }
</style>
</head>

<body>
<div class="panel">

  <h2>Electrical Test</h2>
  <div class="info">
    Cabin: <span id="cabin">--</span><br>
    Model: <span id="model">--</span>
  </div>

  <div id="testArea"></div>

  <button class="start" id="startTest">START TEST</button>
  <button class="back" id="backBtn" style="display:none">BACK</button>

</div>

<script>
const cabinDB = {
  "TRRS904929": "DOST A/C", 
  "TSRS901733": "DOST NON A/C", 
  "TRRS702501": "BADA DOST A/C LX", 
  "TRRS702571": "BADA DOST NON A/C LS", 
  "TRRS904501": "SAATHI A/C", 
  "TRRS904342": "SAATHI NON A/C", 
  "TRRS904658": "DOST EV", 
  "TRRS702453": "BADA DOST I5 A/C LX", 
  "TRRS702721": "BADA DOST I5 NON A/C", 
  "TRRS702320": "BADA DOST CNG", 
  "SCRS718973": "BADA DOST 3.8T BLOWER", 
  "TRRS800238": "PARTNER A/C BS6", 
  "TSRS800212": "PARTNER NON A/C BS3", 
  "TRRS702698": "BADA DOST EV"
};

const baseParams = [
  "Ignition Switch Function",
  "Parking & Roof Marker Function",
  "Head Lamp Low Beam Function",
  "Head Lamp High Beam Function",
  "Head Lamp Pass Function",
  "Indicator LH Function",
  "Indicator RH Function",
  "Wind Screen Washer Tank Function",
  "Wiper Motor Low Speed Function",
  "Wiper Motor High Speed Function",
  "Hazard Switch Function",
  "Interior Lamp Function",
  "DPF Switch Function"
];

const acParams = ["AC Blower", "AC Compressor"];
const blowerParams = ["Cabin Blower"];

const params = new URLSearchParams(window.location.search);
const cabinId = params.get("cabin");
const model = cabinDB[cabinId] || "UNKNOWN MODEL";

document.getElementById("cabin").innerText = cabinId;
document.getElementById("model").innerText = model;

let testParams = [...baseParams];

if (model.includes("A/C")) {
  testParams.push(...acParams);
}
if (model.includes("BLOWER")) {
  testParams.push(...blowerParams);
}

document.getElementById("startTest").onclick = () => {
  const area = document.getElementById("testArea");
  area.innerHTML = "";

  testParams.forEach(p => {
    const status = Math.random() > 0.2 ? "OK" : "NOT OK";
    const cls = status === "OK" ? "ok" : "notok";

    area.innerHTML += `
      <div class="param">
        <span>${p}</span>
        <span class="${cls}">${status}</span>
      </div>
    `;
  });

  document.getElementById("startTest").style.display = "none";
  document.getElementById("backBtn").style.display = "block";
};

document.getElementById("backBtn").onclick = () => {
  window.history.back();
};
</script>

</body>
</html>
